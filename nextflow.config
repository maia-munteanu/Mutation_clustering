process {
    clusterOptions = '-p normal_prio'
    memory = '15G'
    time = '2.h'
    
    withName:parse_vcfs {
        memory = '5G'
        container = '/home/mmunteanu/Clustertools.img'
    }
    withName:get_clusters {
        container = '/home/mmunteanu/Clusters.img'
    }
    withName:count_mutations {
        container = '/home/mmunteanu/Clusters.img'
    }
    withName:get_signatures {
        memory = '50G'
        cpus = 8
        conda = '/home/dnaro/.conda/envs/torchcuda'
        afterScript = 'set +u; conda deactivate'
    }
    
    
    
    withName:serialize_genome {
        memory = '50G'
        container = '/home/mmunteanu/Randommut.img'
    }    
    withName:get_chr_sizes {
        container = '/home/mmunteanu/Samtools.img'
    }  
    withName:randomise_snvs {
        container = '/home/mmunteanu/Randommut.img'
    }  
    withName:test_outputs {
        container = '/home/mmunteanu/Clustertools.img'
    }  
    withName:parse_snvs {
        memory = '5G'
        container = '/home/mmunteanu/Clustertools.img'
    }
    withName:parse_svs {
        memory = '5G'
        container = '/home/mmunteanu/Clustertools.img'
    }
    withName:get_snv_clusters {
        memory = '5G'
        container = '/home/mmunteanu/Clustmut.img'
    }
    withName:get_sv_snv_clusters {
        memory = '10G'
        container = '/home/mmunteanu/Clustertools.img'
    } 
    withName:snv_annotation {
        memory = '10G'
        container = '/home/mmunteanu/Clustertools.img'
    } 
}    


singularity {
        enabled = true
        autoMounts = true
        runOptions = '-B /g/strcombio/fsupek_cancer1/SV_clusters_project/nextflow_analysis -B /local_scratch/tmp/ -B /home/ -B /g/strcombio/ -B /g/strcombio/fsupek_cancer1/SV_clusters_project/nextflow_pipeline/Mutation_clustering/'
}

conda {
       enabled = true    
}

timeline {
  enabled = true
  file = "/g/strcombio/fsupek_cancer1/SV_clusters_project/nextflow_analysis/timeline.html"
}

report {
  enabled = true
  file = "/g/strcombio/fsupek_cancer1/SV_clusters_project/nextflow_analysis/report.html"
}

trace {
  enabled = true
  file = "/g/strcombio/fsupek_cancer1/SV_clusters_project/nextflow_analysis/trace.txt"
}

dag {
  enabled = true
  file = "/g/strcombio/fsupek_cancer1/SV_clusters_project/nextflow_analysis/dag.html"
}

